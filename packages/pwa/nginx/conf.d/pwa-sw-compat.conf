# Service worker compatibility aliases
# iOS/Safari and some PWA tooling request /service-worker.js
# but the PWA currently only serves /sw.js
# Without these rules, nginx falls back to serving index.html for /service-worker.js
# which breaks service worker registration/update behavior

# Redirect legacy /service-worker.js to the actual /sw.js
location = /service-worker.js {
    return 302 /sw.js;
}

# Return 404 for /registerSW.js to prevent SPA fallback serving index.html
location = /registerSW.js {
    return 404;
}
